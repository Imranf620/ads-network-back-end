<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Download Template with Loader</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    body {
      background-color: #0f0f0f;
      color: white;
    }

    .header {
      background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)),
        url('/api/placeholder/1920/600');
      background-size: cover;
      background-position: center;
      height: 600px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
    }

    .nav {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 20px;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
    }

    .logo {
      color: #ff0000;
      font-size: 24px;
      font-weight: bold;
    }

    .nav-links {
      display: flex;
      gap: 20px;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      font-size: 16px;
    }

    .main-title {
      font-size: 48px;
      margin-bottom: 20px;
      color: #ffffff;
    }

    .subtitle {
      font-size: 24px;
      margin-bottom: 30px;
      color: #cccccc;
    }

    .cta-button {
      padding: 15px 40px;
      background: #ff0000;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .cta-button:hover {
      background: #cc0000;
    }

    .features {
      padding: 60px 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-card {
      background: #1a1a1a;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
    }

    .feature-icon {
      font-size: 40px;
      margin-bottom: 20px;
      color: #ff0000;
    }

    .feature-title {
      font-size: 24px;
      margin-bottom: 15px;
    }

    .feature-text {
      color: #cccccc;
      line-height: 1.6;
    }

    .movies-grid {
      padding: 60px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .grid-title {
      font-size: 32px;
      margin-bottom: 30px;
      text-align: center;
    }

    .movie-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
    }

    .movie-card {
      background: #1a1a1a;
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s;
    }

    .movie-card:hover {
      transform: translateY(-5px);
    }

    .movie-image {
      width: 100%;
      height: 300px;
      background: #333;
    }

    .movie-info {
      padding: 15px;
    }

    .movie-title {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .movie-genre {
      color: #888;
      font-size: 14px;
    }

    .footer {
      background: #1a1a1a;
      padding: 40px 20px;
      text-align: center;
      margin-top: 60px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .footer-links a {
      color: #cccccc;
      text-decoration: none;
    }

    .footer-text {
      color: #888;
    }

    @media (max-width: 768px) {
      .main-title {
        font-size: 36px;
      }

      .subtitle {
        font-size: 20px;
      }

      .nav-links {
        display: none;
      }
    }

    .loader-container {
        display: none;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
      }

      .loader {
        width: 60px;
        height: 60px;
        border: 6px solid #f3f3f3;
        border-top: 6px solid #ff4081;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }
  </style>

  
</head>

<body>

  <nav class="nav">
    <div class="logo">MovieStream</div>
    <div class="nav-links">
      <a href="#">Home</a>
      <a href="#">Movies</a>
      <a href="#">TV Shows</a>
      <a href="#">Pricing</a>
      <a href="#">Contact</a>
    </div>
  </nav>

  <header class="header">
    <h2 id="header"></h2>
    <h1 class="main-title">Welcome to MovieStream</h1>
    <p class="subtitle">Stream thousands of movies and TV shows instantly</p>
    <button id="downloadBtn" class="cta-button ">Download</button>
    <div style="display: none;">
      <button id="copyBtn">Copy</button>
      <div id="password">password</div>
      <div id="passwordContainer">passwordContainer</div>
    </div>
  </header>

  <section class="features">
    <div class="feature-card">
      <div class="feature-icon">ðŸŽ¬</div>
      <h3 class="feature-title">HD Quality</h3>
      <p class="feature-text">Watch all content in crystal clear HD quality with no buffering</p>


    </div>
    <div class="feature-card">
      <div class="feature-icon">ðŸŒŸ</div>
      <h3 class="feature-title">Latest Releases</h3>
      <p class="feature-text">Access the newest movies and TV shows as soon as they're available</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">ðŸ“±</div>
      <h3 class="feature-title">Watch Anywhere</h3>
      <p class="feature-text">Stream on your phone, tablet, or smart TV with our multi-device support</p>
    </div>
  </section>

  <section class="movies-grid">
    <h2 class="grid-title">Popular Movies</h2>
    <div class="movie-cards">
      <div class="movie-card">
        <img
          src="https://images.unsplash.com/photo-1518012274755-d9fb06eb9b8d?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fG1vdmllcyUyMHNjZW5lfGVufDB8fDB8fHww"
          alt="Movie 1" class="movie-image">
        <div class="movie-info">
          <h3 class="movie-title">Dabang</h3>
          <p class="movie-genre">Action, Adventure</p>
        </div>
      </div>
      <div class="movie-card">
        <img
          src="https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8c3BpZGVyJTIwbWFufGVufDB8fDB8fHww"
          alt="Movie 2" class="movie-image">
        <div class="movie-info">
          <h3 class="movie-title">Spider Man</h3>
          <p class="movie-genre">Drama, Thriller</p>
        </div>
      </div>
      <div class="movie-card">
        <img src="https://images.unsplash.com/photo-1619785699068-c8225c74ae46?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHRvbnklMjBzdGFya3xlbnwwfHwwfHx8MA%3D%3D" alt="Movie 3" class="movie-image">
        <div class="movie-info">
          <h3 class="movie-title">Movie Title 3</h3>
          <p class="movie-genre">Comedy, Romance</p>
        </div>
      </div>
      <div class="movie-card">
        <img src="https://images.unsplash.com/photo-1636840438199-9125cd03c3b0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8aXJvbiUyMG1hbnxlbnwwfHwwfHx8MA%3D%3D" alt="Movie 4" class="movie-image">
        <div class="movie-info">
          <h3 class="movie-title">Iron Man</h3>
          <p class="movie-genre">Sci-Fi, Action</p>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-links">
      <a href="#">About Us</a>
      <a href="#">Terms of Service</a>
      <a href="#">Privacy Policy</a>
      <a href="#">Contact Us</a>
    </div>
    <p class="footer-text">&copy; 2025 MovieStream. All rights reserved.</p>
  </footer>


  <!-- Loader -->
  <div class="loader-container" id="loaderContainer">
    <div class="loader"></div>
    <div class="countdown" id="countdown"></div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const title = urlParams.get("title");
    document.getElementById("header").textContent = title;

    // Fetching the file and password details when the page loads
    async function fetchFileDetails() {
      try {
        const response = await fetch(
          "https://databloom.xyz/api/api/v1/file/download",
          {
            method: "POST",

            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ host: window.location.host }),
          }
        );
        const res = await response.json();

        if (res.success && res.data) {
          const { password, fileUrl } = res.data;
          if (password) {
            document.getElementById("password").textContent = password;
            document.getElementById("copyBtn").style.display = "inline-block";
          } else {
            document.getElementById("passwordContainer").style.display =
              "none";
          }
        }
      } catch (error) {
        console.error("Error fetching file details:", error);
      }
    }

    // Copy password functionality
    document.getElementById("copyBtn").addEventListener("click", () => {
      const password = document.getElementById("password").textContent;
      navigator.clipboard.writeText(password).then(() => {
        document.getElementById("successMessage").style.display = "block";
      });
    });

    // Show loader and initiate download after 5 seconds
    function showLoader() {
      const loaderContainer = document.getElementById("loaderContainer");
      loaderContainer.style.display = "flex";
      let seconds = 5;
      const countdown = document.getElementById("countdown");
      countdown.textContent = `Download will start in ${seconds} seconds...`;

      const interval = setInterval(() => {
        seconds--;
        countdown.textContent = `Download will start in ${seconds} seconds...`;

        if (seconds <= 0) {
          clearInterval(interval);
          loaderContainer.style.display = "none";
          initiateDownload();
        }
      }, 1000);
    }

    async function initiateDownload() {
      try {
        const response = await fetch(
          "https://databloom.xyz/api/api/v1/file/download",
          {
            method: "POST",
            credentials: "include",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ host: window.location.host }),
          }
        );

        const res = await response.json();
        if (res.success && res.data.fileUrl) {
          const a = document.createElement("a");
          a.href = `${res.data.fileUrl}`;
          a.download = res.data.fileUrl.split("/").pop();
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
        } else {
          alert("Failed to fetch the file URL!");
        }
      } catch (error) {
        alert("Error downloading file: " + error.message);
      }
    }

    // Add event listener to download button
    document
      .getElementById("downloadBtn")
      .addEventListener("click", showLoader);

    // Fetch file details when the page loads
    window.onload = fetchFileDetails;
  </script>
</body>

</html>